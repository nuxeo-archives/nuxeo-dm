<div xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:nxl="http://nuxeo.org/nxforms/layout">

<h:form enctype="multipart/form-data" id="document_edit">

  <script>
    jQuery(document).ready(function() {
      jQuery('#document_edit').focusFirst();
    });
  </script>

  <ui:include src="/incl/safeEdit.xhtml">
    <ui:param name="safeEdit_mode" value="edit" />
    <ui:param name="safeEdit_form" value="document_edit" />
  </ui:include>

  <nxl:documentLayout mode="edit" value="#{currentDocument}" />

  <ui:include src="/incl/document_versioning.xhtml" />
  <nxl:layout name="document_edit_form_options"
    mode="edit" value="#{currentDocument}" />

  <p class="buttonsGadget">
    <nxu:set var="actions"
      value="#{webActions.getActionsList('EDIT_DOCUMENT_FORM')}"
      cache="true">
      <c:forEach var="action" items="#{actions}">
        <ui:decorate template="/incl/action/generic_action_template.xhtml">
          <ui:param name="idPrefix" value="edit_doc_" />
          <ui:param name="useButton" value="true" />
          <ui:define name="inside_action">
            <a4j:support event="onclick"
              onsubmit="dropSafeEdit(); return true;" />
          </ui:define>
        </ui:decorate>
      </c:forEach>
    </nxu:set>
  </p>

</h:form>

</div>